!function(n){"use strict";n(function(){var i,o;i="molongui_author_image",n(document).on("click","#"+i+" .molongui_wpmu_button , #"+i+" .placeholder",function(t){t.preventDefault(),o||(o=wp.media.frames.file_frame=wp.media({title:n(this).data("uploader_title"),multiple:!1,button:{text:n(this).data("uploader_button_text")}})).on("select",function(){var t=o.state().get("selection").first().toJSON();let a=window.location.href;var e=a.slice(0,a.lastIndexOf("/")+1);n("#"+i+"_id").val(t.id),n("#"+i+"_url").val(t.url),n("#"+i+"_edit").val(e+"post.php?post="+t.id+"&action=edit&image-editor"),n("#"+i+" .molongui_current_img").attr("src",t.url).removeClass("placeholder"),0===n("#"+i+" .current_img").find(".edit_options").length?n("#"+i+" .current_img").append('<span class="edit_options uploaded"><a class="remove_img"><span>molongui_authorship_edit_avatar_params.remove</span></a><a href="'+n("#"+i+"_edit").val()+'" class="edit_img" target="_blank"><span>molongui_authorship_edit_avatar_params.edit</span></a></span>'):(n("#"+i+" .current_img .edit_img").attr("href",n("#"+i+"_edit").val()),n("#"+i+" .current_img .edit_options").addClass("uploaded").fadeIn("fast"))}),o.open()}),n("#"+i+" .edit_options").hover(function(){n(this).stop(!0,!0).animate({opacity:1},100)},function(){n(this).stop(!0,!0).animate({opacity:0},100)}),n("#"+i+" .remove_img").on("click",function(t){n(this).parent().fadeOut("fast",function(){n(this).removeClass("uploaded"),n("#"+i+" .molongui_current_img").addClass("placeholder").attr("src","http://placehold.jp/cccccc/666666/150x150.png?text=Upload%20custom%20image"),n("#"+i+" .molongui_image_upload input[type=button]").val(molongui_authorship_edit_avatar_params.upload)}),n("#"+i+"_url, #"+i+"_edit_url, #"+i+"_id").val("")})})}(jQuery);